<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>게시글 상세 양식</title>

<!--배너 슬라이드 부트스트랩 링크-->
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
<!--슬라이드 부트스트랩 링크 끝-->



<!--font -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link
	href="https://fonts.googleapis.com/css2?family=Gothic+A1&display=swap"
	rel="stylesheet">


<!--해당페이지 css-->
<link href="/assets/css/post-detail.css" rel="stylesheet">

<!-- Template Main CSS File -->
<link href="/assets/css/style.css" rel="stylesheet">

<!--헤더 제어 -->
<link href="/assets/vendor/bootstrap/css/bootstrap.min.css"
	rel="stylesheet">
<!-- 신고 모달 css -->
<link href="/assets/css/report.css" rel="stylesheet">
<style>
/* 슬라이드 사이즈 */
.carousel-inner img {
	width: 100%;
	height: 100%;
}
</style>
</head>

<body style="height: 2000px;">
	<!-- ======= Header ======= -->
	<header id="header"
		class="fixed-top d-flex align-items-center header-transparent">
		<div class="container d-flex align-items-center">
			<h1 class="logo me-auto">
				<a href="/pet"><img src="/assets/img/TOGether_PEt_logo.png"
					alt="" class="logo-img"> </a>
			</h1>
			<!-- Uncomment below if you prefer to use an image logo -->
			 <!--  <a href="index.html" class="logo me-auto"><img src="/assets/img/logo.png" alt="" class="img-fluid"></a>-->

			<nav id="navbar" class="navbar order-last order-lg-0">
				<ul>
				
					<li class="dropdown scrollto"><a href="#features"><span>병원</span>
							<i class="bi bi-chevron-down"></i></a>
						<ul>
							<li><a href="/facilities/listpage/hospital/1">병원/약국 전체보기</a></li>
							<li><a href="/facilities/list/all/hospital/1?city=&county=&kind=일반&search=">일반 동물 병원</a></li>
							<li><a href="/facilities/list/all/hospital/1?city=&county=&kind=특수&search=">특수 동물 병원</a></li>
							<li><a href="/facilities/list/all/hospital/1?city=&county=&kind=24&search=">24시간 동물 병원</a></li>
							<li><a href="/facilities/list/all/hospital/1?city=&county=&kind=약국&search=">동물 약국</a></li>
						</ul></li>
					
					
					
					
					<li class="dropdown scrollto"><a href="#why-us"><span>커뮤니티</span>
							<i class="bi bi-chevron-down"></i></a>
						<ul>
						
							<li><a href="/board/1">최신글</a></li>
							<li><a href="/board/post/search/1?day=findallday&type=postType&search=인기글">인기글</a></li>
							<li><a href="/board/post/search/1?day=findallday&type=postType&search=자유게시판">자유게시판</a></li>
							<li><a href="/board/post/search/1?day=findallday&type=postType&search=꿀팁공유">꿀팁공유</a></li>
							<li><a href="/board/post/search/1?day=findallday&type=postType&search=꿀팁요청">꿀팁요청</a></li>
						    <li><a href="/board/post/search/1?day=findallday&type=postType&search=자랑">자랑</a></li>
						    <li><a href="/board/post/search/1?day=findallday&type=postType&search=공지사항">공지사항</a></li>
						</ul></li>
					
					<li class="dropdown scrollto"><a href="#services"><span>시설</span>
							<i class="bi bi-chevron-down"></i></a>
						<ul>
							<li><a href="/facilities/listpage/1">시설 전체보기</a></li>
							<li><a href="/facilities/list/all/1?city=&county=&kind=식당&search=">식당</a></li>
							<li><a href="/facilities/list/all/1?city=&county=&kind=카페&search=">카페</a></li>
							<li><a href="/facilities/list/all/1?city=&county=&kind=용품&search=">쇼핑</a></li>
							<li><a href="/facilities/list/all/1?city=&county=&kind=펜션&search=">숙박시설</a></li>
							<li><a href="/facilities/list/all/1?city=&county=&kind=여행&search=">관광시설</a></li>
							<li><a href="/facilities/list/all/1?city=&county=&kind=미용&search=">미용</a></li>
						</ul></li>

					<th:block th:if="${session.member == null}">
						<li><a class="nav-link scrollto desc-left login"
							data-toggle="modal" data-target="#loginModal">로그인</a></li>
						<li><a class="nav-link scrollto desc-left" href="/pet/join">회원가입</a></li>
					</th:block>

					<th:block th:if="${session.member != null}">
						<li><a class="nav-link scrollto desc-left"
						href="/pet/mypage"
							th:text="|${session.member.name} 님 반갑습니다|">로그아웃</a></li>
						<li><a class="nav-link scrollto desc-left" href="/pet/logout">로그아웃</a></li>
					</th:block>

					<!-- 오류시 스크립트 창 출력 -->
					 <th:block th:if="${err != null}">
						<input type="hidden" th:value="${err}" id="err">
						<script>
							let err = document.querySelector("#err").value
							alert(err);
						</script>
					</th:block>
				</ul>
				<i class="bi bi-list mobile-nav-toggle"></i>
			</nav>
		

		</div>
	</header>
	<!-- End Header -->





		<!--배너 슬라이드 시작-->
	<div class="container " style="margin-top: 100px;">
		<div id="myCarousel" class="carousel slide" data-ride="carousel">
			<!-- Indicators -->
			<ul class="carousel-indicators">
				<li data-target="#myCarousel" data-slide-to="0" class="active"></li>
				<li data-target="#myCarousel" data-slide-to="1"></li>
				<li data-target="#myCarousel" data-slide-to="2"></li>
			</ul>
			<!-- The slideshow -->
			<div class="carousel-inner">
				<div class="carousel-item active">
				<a th:href="@{/board/detail/{postNum}(postNum=${notice[0].postNum})}">
					<img src="/assets/img/banner3.jpeg" alt="Los Angeles" width="100%"
						height="300px;">
					<div class="carousel-caption d-none d-md-block"
						style="line-height: 100px; color: black;">
						<h5 th:text="${notice[0].postType}">First slide label</h5>
						<p th:text="${notice[0].postTitle}">Some representative placeholder content for the first
							slide.</p>
					</div>
				</a>
				</div>
				<div class="carousel-item">
				<a th:href="@{/board/detail/{postNum}(postNum=${notice[1].postNum})}">
					<img src="/assets/img/banner3.jpeg" alt="Chicago" width="100%"
						height="300px;">
					<div class="carousel-caption d-none d-md-block"
						style="color: black; line-height: 100px;">
						<h5 th:text="${notice[1].postType}">First slide label</h5>
						<p th:text="${notice[1].postTitle}">Some representative placeholder content for the first
							slide.</p>
					</div>
					</a>
				</div>
				<div class="carousel-item">
					<a th:href="@{/board/detail/{postNum}(postNum=${notice[2].postNum})}">
					<img src="/assets/img/banner3.jpeg" alt="New York" width="100%"
						height="300px; ">
					<div class="carousel-caption d-none d-md-block"
						style="color: black; line-height: 100px;">
						<h5 th:text="${notice[2].postType}">First slide label</h5>
						<p th:text="${notice[2].postTitle}">Some representative placeholder content for the first
							slide.</p>
					</div>
					</a>
				</div>
			</div>
			<!-- Left and right controls -->
			<a class="carousel-control-prev" href="#myCarousel" data-slide="prev">
				<span class="carousel-control-prev-icon"></span>
			</a> <a class="carousel-control-next" href="#myCarousel"
				data-slide="next"> <span class="carousel-control-next-icon"></span>
			</a>
		</div>
	</div>
	<!-- 베너 슬라이드 종료 -->

	<!--메인 시작-->
	<div class="community-main">
	<!-- 사이드 카테고리 -->
		<div class="category">
			<ul class="ctg-title">
				<li>카테고리
					<ul class="ctg-body">
						<li><img src="/assets/img/category3.png"><a
							class="ctg-body2" href="/board/1" th:text="최신글">예시</a></li>
						<li><img src="/assets/img/category2.png"><a
							class="ctg-body1" th:href="@{/board/post/search/{page}(page=1 ,day=findallday,type=postType , search=인기글)}" th:text="인기글">예시</a></li>
						<li><img src="/assets/img/category2.png"><a
							class="ctg-body1" th:href="@{/board/post/search/{page}(page=1 ,day=findallday,type=postType , search=자유게시판)}" th:text="자유게시판">예시</a></li>
						<li><img src="/assets/img/category3.png"><a
							class="ctg-body2" th:href="@{/board/post/search/{page}(page=1 ,day=findallday,type=postType , search=꿀팁공유)}" th:text="꿀팁공유">예시</a></li>
						<li><img src="/assets/img/category2.png"><a
							class="ctg-body2" th:href="@{/board/post/search/{page}(page=1 ,day=findallday,type=postType , search=꿀팁요청)}" th:text="꿀팁요청">예시</a></li>
						<li><img src="/assets/img/category3.png"><a
							class="ctg-body2" th:href="@{/board/post/search/{page}(page=1 ,day=findallday,type=postType , search=자랑)}" th:text="자랑">예시</a></li>
						<li><img src="/assets/img/category2.png"><a
							class="ctg-body2" th:href="@{/board/post/search/{page}(page=1 ,day=findallday,type=postType , search=공지사항)}" th:text="공지사항">예시</a></li>
						<li th:if="${session.member != null} and ${#strings.equals(session.member.admin,'관리자')}"><img src="/assets/img/category2.png"><a
							class="ctg-body2" href="/board/report/view" >관리자 페이지로 이동</a></li>
					</ul>
				</li>
			</ul>
		</div>
		<!-- 사이드 카테고리 종료 -->



		<!-- 게시글 상세  -->
		<div class="post_box row">
			<div class="post_header">
				<p class="post_category" th:text="${postDetail.postType}">@@@게시판</p>
				<p class="post_title" th:text="${postDetail.postTitle}">게시글 제목</p>
				<hr>
				<p class="post_writer" th:text="${postDetail.id}">아이디</p>
				<hr>
				<p class="post_date">
					<span th:text="${postDetail.postDate}">작성일자</span> 
					<span th:text="|조회 ${postDetail.postViews}|">| 조회 수</span>
				</p>
				<hr>
			</div>
				<!-- 게시글 수정 버튼 -->
			<a th:if="${session.member != null} and ${#strings.equals(postDetail.id, session.member.id)}"
			   class="report_btn"
			   th:href="@{/board/update/getpost/{postNum}(postNum=${postDetail.postNum})}"
			   >게시글 수정하기</a>
			<div>
				<p th:utext="${postDetail.postContent}">게시글 내용</p>
			</div>
			
			<a class="post_category col-4"
			   style="font-size: 0.8em;"
			   th:href="@{/board/post/search/1(day=findallday,type=id,search=${postDetail.id})}"
			   th:text="|${postDetail.id} 님의 게시글 더보기|">@@@님의 게시글 더보기</a>

			<a class="col-2"></a>
			<label class="col-6">
			   
			<!-- 게시글 삭제 버튼 폼 -->
			<form id="deletePost"
				th:action="@{/board/delet/post/{postNum}(postNum=${postDetail.postNum})}"
				th:if="${session.member != null} and ${#strings.equals(postDetail.id, session.member.id)}"
				method="post">
				<input type="hidden" name="_method" value="delete" />
				<button onclick="return confirm('정말로 삭제하시겠습니까?')" class="rounded-2">삭제</button>
			</form>
			
				
			<!-- 게시글 신고 버튼 
				 th:onclick="'openReportModal(`post`, ' + ${postDetail.postNum} + ')'"
				 속성을 추가하여,모달창 출력시 hidden 태그의 value가 동적으로 수정됩니다 
				 'openReportModal(`신고타입`, ' + 게시글/댓글 번호 + ')' 를 입력하여 사용합니다-->
			<button id="reportPost" class="report-btn rounded-2 mr-3" 
					data-bs-toggle="modal" data-bs-target="#reportModal"
					th:onclick="'openReportModal(`post`, ' + ${postDetail.postNum} + ')'"
				    >게시글 신고</button>
			</label>
			<hr>

			<!-- 댓글 리스트 -->
			<p th:text="|댓글 ${#lists.size(postReply)} 개|">댓글 (5)</p>
			<th:block th:each="list : ${postReply}">
				<div class="mt-3">
					<p th:text="${list.id}" style="font-weight: bold;" class="mb-3">탄이123</p>
					<p th:text="${list.commentContent}" class="mb-3">잘 봤습니다.</p>
					<label id="forButton"> 
						<span th:text="${list.commentDate}">작성날짜</span>
						
						<!-- 댓글 신고 버튼. 게시글 신고와 동일하게 동작합니다 -->
						<button id="reportReply" class="report-btn rounded-2" style="margin-left: 10px;"
						data-bs-toggle="modal" data-bs-target="#reportModal"
						th:onclick="'openReportModal(`reply`, ' + ${list.commentNum} + ')'"
						>신고</button>
						
						<!-- 댓글 삭제 버튼 -->
						<form id="deletePost" style="float: right;"
							th:if="${session.member != null} and ${#strings.equals(list.id, session.member.id)}"
							th:action="@{/board/delet/reply/{commentNum}(commentNum=${list.commentNum})}"
							onclick="return confirm('정말로 삭제하시겠습니까?')" method="post">
							<input type="hidden" name="_method" value="delete" />
							<button class="rounded-2">삭제</button>
						</form>
						
						<!-- 댓글 수정 버튼
						     버튼 클릭시 하단의 collapse가 작동합니다 -->
						<button class="report-btn rounded-2 mr-2" data-bs-toggle="collapse"
						th:if="${session.member != null} and ${#strings.equals(list.id, session.member.id)}"
						th:href="|#c${list.commentNum}|" role="button" aria-expanded="false"
						aria-controls="collapseExample">수정</button>
						
					</label>
						<!-- 댓글 수정 폼 -->
						<div class="collapse mt-2 row" th:id="c+${list.commentNum}">
							<form th:action="@{/board/update/reply/{replyNum}(replyNum=${list.commentNum})}" method="post">
							<textarea th:text="${list.commentContent}" class="col-11" name="commentContent"></textarea><button class="col-1 rounded-2">수정하기</button>
							</form>
						</div>
				</div>
			</th:block>
			<!-- 댓글이 없을경우 출력되는 문구입니다 -->
			<p th:if="${#lists.size(postReply) == 0}">등록된 댓글이 없습니다</p>
			
			<!-- 로그인 된 경우, 댓글 작성 폼이 활성화됩니다 -->
			<div class="comment" th:if="${session.member != null}">
				<form action="/board/writeReply" method="post">
					<p th:text="${session.member.id}">(아이디)</p>
					<input type="text" name="commentContent" placeholder="댓글을 남겨보세요.">
					<input type="hidden" name="postNum"
						th:value="${postDetail.postNum}"> <input type="submit"
						value="등록">
				</form>
			</div>
		</div>
		<!-- 게시글 상세 종료 -->
		
		<!-- 하단 버튼 -->
		<div class="empty"></div>
		<div class="bottom-button">
			<button onclick="location.href='/board'">글목록</button>
			<button style="margin-right: 3px;"
					onclick="location.href='/board/write'"
					th:if="${session.member != null}">글쓰기</button>
		</div>
		<!-- 하단 버튼 종료-->
	</div>
	<!-- 메인 종료 -->
	
	
	<!-- 로그인 모달 -->
	<div class="modal fade login" id="loginModal" tabindex="-1"
		role="dialog" aria-labelledby="loginModal" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered" role="document">
			<div class="modal-content" style="padding-bottom: 50px;">
				<div class="modal-header">
					<h5 class="modal-title" id="exampleModalLabel"></h5>
					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<form method="post" action="/pet/login" id="login-form">
					<div class="login-wrapper">
						<h2>
							<img src="/assets/img/logo.png">
						</h2>
						<input type="text" class="userName" name="id" placeholder="Email">
						<input type="password" name="password" placeholder="Password"><br>
						<input type="submit" value="Login"><br> <br> <label
							for="remember-check"> <input type="checkbox"
							id="remember-check">아이디 저장하기
						</label><br> <a href="#">아이디 찾기</a> | <a href="#">비밀번호 찾기</a> | <a
							href="#">회원가입</a><br> <br>
						<p>SNS계정으로 간편 로그인</p>
						<img src="/assets/img/naver.png"
							onclick="javascript:naverLogin();" id="naverIdLogin_loginButton">
						<img src="/assets/img/kakao.png"
							onclick="javascript:kakaoLogin();" id="kakaoLogin"> <img
							src="/assets/img/facebook.png">
					</div>
				</form>

			</div>
		</div>
	</div>
	<!-- 로그인 모달 종료 -->
	

<!-- 게시글 / 댓글 신고 -->
<!-- 아이디 : 세션에서 사용합니다
     신고사유 : 체크박스 벨류를 가져와 취합합니다
     타입 : 하단의 스트립트를 이용해, 버튼을 누르는쪽에서 동적으로 타입을 추가합니다
     번호 : 위와 마찬가지 방식으로 동작합니다-->
  <script>
  //버튼을 눌러 모달창을 호출할때, onclick 속성으로 해당 함수를 호출합니다
  function openReportModal(type, Num) {
    //모달의 hidden 타입 블럭에 value를 수정합니다
    document.querySelector("#reportType").value = type;
    document.querySelector("#reportNum").value = Num;
    }  
  </script>

<!-- 신고 모달 시작 -->
  <div class="modal fade" id="reportModal" tabindex="-1" aria-labelledby="reportModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
      	<!-- 신고 모달 헤더 -->
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="exampleModalLabel">신고사유</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        
        <!-- 신고 모달 바디 -->
        <div class="modal-body">
            <div id="wrapper">
                <form action="/board/report" method="post">
                  <!-- 해당 영역에 데이터가 추가됩니다 -->
                  <input type="hidden" id="reportType" name="type">
    			  <input type="hidden" id="reportNum" name="num">
    			 <!-- 체크박스 1 -->
                <div id="box">
                <div>
                  <input class="checkreport"
                  		 type="checkbox" id="promote" name="reportReason" 
                  		 value="영리목적/홍보성"
                         checked>
                  <label for="promote"><span>영리목적/홍보성</span></label>
                </div>
                <div>
                  <input class="checkreport"
                  		 type="checkbox" id="copy" name=reportReason 
                  		 value="저작권침해">
                  <label for="copy">저작권침해</label>
                </div>
                <div>
                  <input class="checkreport"
                  		 type="checkbox" id="obscene" name="reportReason" 
                  		 value="음란성/선정성">
                  <label for="obscene">음란성/선정성</label>
                </div>
                </div>
                
                <!-- 체크박스 2 -->
                <div id="box2">
                <div>
                    <input class="checkreport" 
                    	   type="checkbox" id="curse" name="reportReason" 
                    	   value="욕설/인신공격">
                    <label for="curse">욕설/인신공격</label>
                </div>
                <div>
                    <input class="checkreport" 
                    	   type="checkbox" id="personal" name="reportReason" 
                    	   value="개인정보노출">
                    <label for="personal">개인정보노출</label>
                </div>
                <div>
                    <input class="checkreport" 
                    	   type="checkbox" id="repeat" name="reportReason"
                    	   value="같은내용반복게시">
                    <label for="repeat">같은내용반복게시</label>
                </div>
                
                <!-- 신고 사유에 해당사항이 없을경우, 텍스트를 입력하도록합니다 -->
                </div>
                    <label for="etc">기타</label><br>
                    <textarea rows="4" cols="50"  name="reportReason"></textarea><br>
                <input id="btn" type="submit" value="신고하기"></input>
                </form>
                </div>
              </div>
              <!-- 신고 모달 바디 종료 -->
          </div>
          <!-- 신고 모달 콘텐츠 종료 -->
       </div>
     </div>
    <!-- 신고 모달 종료 -->
  
	
	<!-- 맨 위로 이동하는 버튼 -->
	<a href="#"
		class="back-to-top d-flex align-items-center justify-content-center"><i
		class="bi bi-arrow-up-short"></i></a>

	<!-- Vendor JS Files -->
	<script src="/assets/vendor/purecounter/purecounter_vanilla.js"></script>
	<script src="/assets/vendor/aos/aos.js"></script>
	<script src="/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
	<script src="/assets/vendor/glightbox/js/glightbox.min.js"></script>
	<script src="/assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
	<script src="/assets/vendor/swiper/swiper-bundle.min.js"></script>
	<script src="/assets/vendor/php-email-form/validate.js"></script>

	<!-- Template Main JS File -->
	<script src="/assets/js/main.js"></script>

	<!-- login JS File-->
	<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
		integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
		crossorigin="anonymous"></script>
	<script
		src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
		integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
		crossorigin="anonymous"></script>
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
		integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
		crossorigin="anonymous"></script>
	<!--카카오톡-->
	<script src="https://developers.kakao.com/sdk/js/kakao.js"></script>
	<script src="/kakaoAPI.js"></script>
	<!--네이버-->
	<script
		src="https://static.nid.naver.com/js/naveridlogin_js_sdk_2.0.2.js"
		charset="utf-8"></script>
	<script src="/naverAPI.js"></script>
	<!--구글-->
	<script src="https://accounts.google.com/gsi/client" async defer></script>
	<script src="/googleAPI.js"></script>
</body>

</html>